<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<th:block th:with="title='Keranjang'"></th:block>

<!-- WAJIB: PAKAI PARAMETER CONTENT -->
<th:block th:replace="layouts/main :: layout(~{::content})">

    <th:block th:fragment="content">

        <h1 style="color:#FFD700;">Your Cart</h1>

        <p th:if="${success != null}"
           style="color:#00ff88; margin-bottom:15px;"
           th:text="${success}">
        </p>

        <p th:if="${carts.size() == 0}" style="color:#ccc;">
            Dont have any items in your cart yet.
        </p>

        <div th:if="${carts.size() > 0}">

            <table cellpadding="10" cellspacing="0"
                   style="width:100%; color:#f5f5f5; border-collapse:collapse; margin-top:15px;">

                <thead style="background:#2b2b2b; color:#FFD700;">
                    <tr>
                        <th style="padding:12px;">HT Name</th>
                        <th style="padding:12px;">Price</th>
                        <th style="padding:12px;">Amount</th>
                        <th style="padding:12px;">Total</th>
                        <th style="padding:12px;">Action</th>
                    </tr>
                </thead>

                <tbody>

                    <tr th:each="cart : ${carts}" style="border-bottom:1px solid #333;">

                        <td style="padding:12px;" th:text="${cart.namaHt}"></td>

                        <td style="padding:12px;">
                            Rp <span th:text="${#numbers.formatInteger(cart.harga, 0, 'POINT')}"></span>
                        </td>

                        <td style="padding:12px;">
                            <form th:action="@{'/cart/update/' + ${cart.id}}" method="post" style="display:inline;">
                                <input type="number" name="jumlah"
                                       th:value="${cart.jumlah}" min="1"
                                       style="width:60px; background:#1a1a1a; border:1px solid #555;
                                              color:#f5f5f5; text-align:center; border-radius:4px;">

                                <button type="submit"
                                        style="background:#FFD700; padding:5px 10px; border:none; border-radius:5px;">
                                    Update
                                </button>
                            </form>
                        </td>

                        <td style="padding:12px;">
                            Rp <span th:text="${#numbers.formatInteger(cart.harga * cart.jumlah, 0, 'POINT')}"></span>
                        </td>

                        <td style="padding:12px;">
                            <form th:action="@{'/cart/delete/' + ${cart.id}}" method="post" style="display:inline;">
                                <button type="submit"
                                        style="background:#ff4d4d; padding:6px 12px; border:none;
                                               border-radius:5px; color:white;">
                                    Remove
                                </button>
                            </form>
                        </td>

                    </tr>

                    <tr style="background:#2b2b2b;">
                        <td colspan="3" style="text-align:right; font-weight:bold; padding:12px;">
                            Grand Total:
                        </td>
                        <td colspan="2" style="font-weight:bold; color:#FFD700; padding:12px;">
                            Rp <span th:text="${#numbers.formatInteger(grandTotal, 0, 'POINT')}"></span>
                        </td>
                    </tr>

                </tbody>
            </table>

            <form th:action="@{/cart/checkout}" method="post"
                  style="margin-top:25px; text-align:right;">
                <button type="submit"
                        style="background:#FFD700; color:#111; padding:10px 18px;
                               font-weight:bold; border:none; border-radius:6px;">
                    Checkout Now
                </button>
            </form>

        </div>

    </th:block>

</th:block>

</html>
